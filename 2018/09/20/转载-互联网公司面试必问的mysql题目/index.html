<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
    
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.1" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="MySQL是一个关系型数据库管理系统，目前属于 Oracle 旗下产品。虽然单机性能比不上oracle，但免费开源，单机成本低且借助于分布式集群所以受到互联网公司的青睐，是互联网公司的主流数据库。">
<meta name="keywords" content="MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="转载-互联网公司面试必问的mysql题目">
<meta property="og:url" content="https://blog.timilong.com/2018/09/20/转载-互联网公司面试必问的mysql题目/index.html">
<meta property="og:site_name" content="Timilong&#39;s blog">
<meta property="og:description" content="MySQL是一个关系型数据库管理系统，目前属于 Oracle 旗下产品。虽然单机性能比不上oracle，但免费开源，单机成本低且借助于分布式集群所以受到互联网公司的青睐，是互联网公司的主流数据库。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://qiniucdn.timilong.com/1543736914285.jpg">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/9/19/165f09ddcf1f8469?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/9/19/165f09ddced993f6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/9/19/165f09de2d1d5b0e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/9/19/165f09de6982ddaf?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/9/19/165f09de6996a964?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:updated_time" content="2018-12-04T06:35:32.402Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="转载-互联网公司面试必问的mysql题目">
<meta name="twitter:description" content="MySQL是一个关系型数据库管理系统，目前属于 Oracle 旗下产品。虽然单机性能比不上oracle，但免费开源，单机成本低且借助于分布式集群所以受到互联网公司的青睐，是互联网公司的主流数据库。">
<meta name="twitter:image" content="http://qiniucdn.timilong.com/1543736914285.jpg">






  <link rel="canonical" href="https://blog.timilong.com/2018/09/20/转载-互联网公司面试必问的mysql题目/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>转载-互联网公司面试必问的mysql题目 | Timilong's blog</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Timilong's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Cease to struggle and you cease to live.--Thomas Carlyle</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-photos">
    <a href="/photos/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-camera-retro"></i> <br />相册</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.timilong.com/2018/09/20/转载-互联网公司面试必问的mysql题目/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="博主">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Timilong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">转载-互联网公司面试必问的mysql题目
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建于：2018-09-20 10:16:26" itemprop="dateCreated datePublished" datetime="2018-09-20T10:16:26Z">2018-09-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="更新于：2018-12-04 06:35:32" itemprop="dateModified" datetime="2018-12-04T06:35:32Z">2018-12-04</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          
              <div class="post-description">MySQL是一个关系型数据库管理系统，目前属于 Oracle 旗下产品。虽然单机性能比不上oracle，但免费开源，单机成本低且借助于分布式集群所以受到互联网公司的青睐，是互联网公司的主流数据库。</div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://qiniucdn.timilong.com/1543736914285.jpg" alt="封面"></p>
<blockquote>
<p>转载自: 微信公众号 codewill，<a href="https://mp.weixin.qq.com/s?__biz=MzU3MTQwNDEyMg==&amp;mid=2247483712&amp;idx=1&amp;sn=69d682415757d739437a81e46614010a&amp;chksm=fce1fb75cb967263ec343596a94f52fcff84aeb56f95ced0534fdb739c2eab453f027f07a1c8&amp;token=1140785409&amp;lang=zh_CN#rd" target="_blank" rel="noopener">互联网公司面试必问的mysql题目</a><br>参考: 掘金, <a href="https://juejin.im/post/5ba1f32ee51d450e805b43f2?utm_source=gold_browser_extension" target="_blank" rel="noopener">互联网公司必问的mysql题目</a></p>
</blockquote>
<h3 id="什么是脏读？幻读？不可重复读？什么是事务的隔离级别？Mysql的默认隔离级别是？"><a href="#什么是脏读？幻读？不可重复读？什么是事务的隔离级别？Mysql的默认隔离级别是？" class="headerlink" title="什么是脏读？幻读？不可重复读？什么是事务的隔离级别？Mysql的默认隔离级别是？"></a>什么是脏读？幻读？不可重复读？什么是事务的隔离级别？Mysql的默认隔离级别是？</h3><p>脏读：</p>
<blockquote>
<p>事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据</p>
</blockquote>
<p>不可重复读：</p>
<blockquote>
<p>事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。</p>
</blockquote>
<p>幻读：</p>
<blockquote>
<p>系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。</p>
</blockquote>
<h4 id="Read-uncommitted"><a href="#Read-uncommitted" class="headerlink" title="Read uncommitted"></a>Read uncommitted</h4><p>读未提交，顾名思义，就是一个事务可以读取另一个未提交事务的数据。</p>
<h4 id="Read-committed"><a href="#Read-committed" class="headerlink" title="Read committed"></a>Read committed</h4><p>读提交，顾名思义，就是一个事务要等另一个事务提交后才能读取数据。</p>
<p>小A去买东西（卡里有1万元），当他买单时（事务开启），系统事先检测到他的卡里有1万，就在这个时候！！小A的妻子要把钱全部转出充当家用，并提交。当系统准备扣款时，再检测卡里的金额，发现已经没钱了（第二次检测金额当然要等待妻子转出金额事务提交完）。A就会很郁闷</p>
<p>分析：这就是读提交，若有事务对数据进行更新（UPDATE）操作时，读操作事务要等待这个更新操作事务提交后才能读取数据，可以解决脏读问题。但在这个事例中，出现了一个事务范围内两个相同的查询却返回了不同数据，这就是不可重复读。</p>
<h4 id="Repeatable-read"><a href="#Repeatable-read" class="headerlink" title="Repeatable read"></a>Repeatable read</h4><p>重复读，就是在开始读取数据（事务开启）时，不再允许修改操作</p>
<p>事例：小A去买东西（卡里有1万元），当他买单时（事务开启，不允许其他事务的UPDATE修改操作），收费系统事先检测到他的卡里有1万。这时候他的妻子不能转出金额了。接下来收费系统就可以扣款了。</p>
<p>分析：重复读可以解决不可重复读问题。写到这里，应该明白的一点就是，不可重复读对应的是修改，即UPDATE操作。但是可能还会有幻读问题。因为幻读问题对应的是插入INSERT操作，而不是UPDATE操作。</p>
<h4 id="什么时候会出现幻读？"><a href="#什么时候会出现幻读？" class="headerlink" title="什么时候会出现幻读？"></a>什么时候会出现幻读？</h4><p>事例：小A去买东西，花了2千元，然后他的妻子去查看他的消费记录（全表扫描FTS，妻事务开启），看到确实是花了2千元，就在这个时候，小A花了1万买了一部电脑，INSERT了一条消费记录，并提交。当妻子打印小A的消费记录清单时（妻子事务提交），发现花了1.2万元，似乎出现了幻觉，这就是幻读。</p>
<h4 id="Serializable-序列化"><a href="#Serializable-序列化" class="headerlink" title="Serializable 序列化"></a>Serializable 序列化</h4><p>Serializable 是最高的事务隔离级别，在该级别下，事务串行化顺序执行，可以避免脏读、不可重复读与幻读。但是这种事务隔离级别效率低下，比较耗数据库性能，一般不使用。</p>
<p>Mysql的默认隔离级别是Repeatable read(可重复读)。</p>
<h3 id="事物隔离是怎么实现的？"><a href="#事物隔离是怎么实现的？" class="headerlink" title="事物隔离是怎么实现的？"></a>事物隔离是怎么实现的？</h3><p>是基于锁实现的.</p>
<h3 id="有哪些锁？分别介绍下"><a href="#有哪些锁？分别介绍下" class="headerlink" title="有哪些锁？分别介绍下"></a>有哪些锁？分别介绍下</h3><p>在DBMS中，可以按照锁的粒度把数据库锁分为行级锁(INNODB引擎)、表级锁(MYISAM引擎)和页级锁(BDB引擎 )。</p>
<h4 id="行级锁"><a href="#行级锁" class="headerlink" title="行级锁"></a>行级锁</h4><blockquote>
<p>行级锁是Mysql中锁定粒度最细的一种锁，表示只针对当前操作的行进行加锁。行级锁能大大减少数据库操作的冲突。其加锁粒度最小，但加锁的开销也最大。行级锁分为共享锁 和 排他锁。<br>特点: 开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高。</p>
</blockquote>
<h4 id="表级锁"><a href="#表级锁" class="headerlink" title="表级锁"></a>表级锁</h4><blockquote>
<p>表级锁是MySQL中锁定粒度最大的一种锁，表示对当前操作的整张表加锁，它实现简单，资源消耗较少，被大部分MySQL引擎支持。最常使用的MYISAM与INNODB都支持表级锁定。表级锁定分为表共享读锁（共享锁）与表独占写锁（排他锁）。<br>特点: 开销小，加锁快；不会出现死锁；锁定粒度大，发出锁冲突的概率最高，并发度最低。</p>
</blockquote>
<h4 id="页级锁"><a href="#页级锁" class="headerlink" title="页级锁"></a>页级锁</h4><blockquote>
<p>页级锁是MySQL中锁定粒度介于行级锁和表级锁中间的一种锁。表级锁速度快，但冲突多，行级冲突少，但速度慢。所以取了折衷的页级，一次锁定相邻的一组记录。<br>特点: 开销和加锁时间界于表锁和行锁之间；会出现死锁；锁定粒度界于表锁和行锁之间，并发度一般</p>
</blockquote>
<h3 id="什么是死锁？怎么解决？"><a href="#什么是死锁？怎么解决？" class="headerlink" title="什么是死锁？怎么解决？"></a>什么是死锁？怎么解决？</h3><p>死锁是指两个或多个事务在同一资源上相互占用，并请求锁定对付的资源，从而导致恶性循环的现象。</p>
<h4 id="常见的解决死锁的方法"><a href="#常见的解决死锁的方法" class="headerlink" title="常见的解决死锁的方法"></a>常见的解决死锁的方法</h4><blockquote>
<p>如果不同程序会并发存取多个表，尽量约定以相同的顺序访问表，可以大大降低死锁机会。<br>在同一个事务中，尽可能做到一次锁定所需要的所有资源，减少死锁产生概率；<br>对于非常容易产生死锁的业务部分，可以尝试使用升级锁定颗粒度，通过表级锁定来减少死锁产生的概率；</p>
</blockquote>
<p>如果业务处理不好可以用分布式事务锁或者使用乐观锁</p>
<h3 id="SQL的生命周期？关键字的先后顺序？"><a href="#SQL的生命周期？关键字的先后顺序？" class="headerlink" title="SQL的生命周期？关键字的先后顺序？"></a>SQL的生命周期？关键字的先后顺序？</h3><h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><blockquote>
<p>应用服务器与数据库服务器建立一个连接<br>数据库进程拿到请求sql<br>解析并生成执行计划，执行<br>读取数据到内存并进行逻辑处理<br>通过步骤一的连接，发送结果到客户端<br>关掉连接，释放资源</p>
</blockquote>
<h4 id="关键字先后顺序"><a href="#关键字先后顺序" class="headerlink" title="关键字先后顺序"></a>关键字先后顺序</h4><blockquote>
<p>FROM：对 FROM 子句中的前两个表执行笛卡尔积(交叉联接)，生成虚拟表 VT1。<br>ON：对 VT1 应用 ON 筛选器，只有那些使为真才被插入到 TV2。<br>OUTER (JOIN):如果指定了 OUTER JOIN(相对于 CROSS JOIN 或 INNER JOIN)，保留表中未找到匹配的行将作为外部行添加到 VT2，生成 TV3。如果 FROM 子句包含两个以上的表，则对上一个联接生成的结果表和下一个表重复执行步骤 1 到步骤 3，直到处理完所有的表位置。<br>WHERE：对 TV3 应用 WHERE 筛选器，只有使为 true 的行才插入 TV4。<br>GROUP BY：按 GROUP BY 子句中的列列表对 TV4 中的行进行分组，生成 TV5。<br>CUTE|ROLLUP：把超组插入 VT5，生成 VT6。<br>HAVING：对 VT6 应用 HAVING 筛选器，只有使为 true 的组插入到 VT7。<br>SELECT：处理 SELECT 列表，产生 VT8。<br>DISTINCT：将重复的行从 VT8 中删除，产品 VT9。<br>ORDER BY：将 VT9 中的行按 ORDER BY 子句中的列列表顺序，生成一个游标(VC10)。<br>TOP：从 VC10 的开始处选择指定数量或比例的行，生成表 TV11，并返回给调用者。</p>
</blockquote>
<h3 id="什么是乐观锁？悲观锁？实现方式？"><a href="#什么是乐观锁？悲观锁？实现方式？" class="headerlink" title="什么是乐观锁？悲观锁？实现方式？"></a>什么是乐观锁？悲观锁？实现方式？</h3><h4 id="悲观锁"><a href="#悲观锁" class="headerlink" title="悲观锁"></a>悲观锁</h4><p>悲观锁指对数据被意外修改持保守态度，依赖数据库原生支持的锁机制来保证当前事务处理的安全性，防止其他并发事务对目标数据的破坏或破坏其他并发事务数据，将在事务开始执行前或执行中申请锁定，执行完后再释放锁定。这对于长事务来讲，可能会严重影响系统的并发处理能力。 自带的数据库事务就是典型的悲观锁。</p>
<h4 id="乐观锁"><a href="#乐观锁" class="headerlink" title="乐观锁"></a>乐观锁</h4><p>乐观锁（Optimistic Lock），顾名思义，就是很乐观，每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在提交更新的时候会判断一下在此期间别人有没有去更新这个数据。乐观锁适用于读多写少的应用场景，这样可以提高吞吐量。</p>
<p>一般是加一个版本号字段 每次更新时候比较版本号</p>
<h3 id="什么是数据库连接池？"><a href="#什么是数据库连接池？" class="headerlink" title="什么是数据库连接池？"></a>什么是数据库连接池？</h3><p>从上一个sql生命周期题目，可以看到其中的连接在里面发挥着重大作用，但频繁的创建和销毁，非常浪费系统资源。由于数据库更适合长连接，也就有个连接池，能对连接复用，维护连接对象、分配、管理、释放，也可以避免创建大量的连接对DB引发的各种问题；另外通过请求排队，也缓解对DB的冲击。</p>
<h3 id="索引设计的原则？"><a href="#索引设计的原则？" class="headerlink" title="索引设计的原则？"></a>索引设计的原则？</h3><p>适合索引的列是出现在where子句中的列，或者连接子句中指定的列</p>
<p>基数较小的类，索引效果较差，没有必要在此列建立索引</p>
<p>使用短索引，如果对长字符串列进行索引，应该指定一个前缀长度，这样能够节省大量索引空间</p>
<p>不要过度索引。索引需要额外的磁盘空间，并降低写操作的性能。在修改表内容的时候，索引会进行更新甚至重构，索引列越多，这个时间就会越长。所以只保持需要的索引有利于查询即可。</p>
<h3 id="什么是数据库索引？索引有哪几种类型？什么是最左前缀原则？索引算法有哪些？有什么区别？"><a href="#什么是数据库索引？索引有哪几种类型？什么是最左前缀原则？索引算法有哪些？有什么区别？" class="headerlink" title="什么是数据库索引？索引有哪几种类型？什么是最左前缀原则？索引算法有哪些？有什么区别？"></a>什么是数据库索引？索引有哪几种类型？什么是最左前缀原则？索引算法有哪些？有什么区别？</h3><p>索引是对数据库表中一列或多列的值进行排序的一种结构。一个非常恰当的比喻就是书的目录页与书的正文内容之间的关系，为了方便查找书中的内容，通过对内容建立索引形成目录。索引是一个文件，它是要占据物理空间的。</p>
<h4 id="主键索引"><a href="#主键索引" class="headerlink" title="主键索引:"></a>主键索引:</h4><p>数据列不允许重复，不允许为NULL.一个表只能有一个主键primary key。</p>
<h4 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引:"></a>唯一索引:</h4><p>数据列不允许重复，允许为NULL值，一个表允许多个列创建唯一索引。</p>
<p>可以通过下列sql创建唯一索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name ADD UNIQUE (column);</span><br></pre></td></tr></table></figure></p>
<p>可以通过下列sql创建唯一组合索引<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name ADD UNIQUE (column1,column2);</span><br></pre></td></tr></table></figure></p>
<h4 id="普通索引"><a href="#普通索引" class="headerlink" title="普通索引:"></a>普通索引:</h4><p>基本的索引类型，没有唯一性的限制，允许为NULL值。</p>
<p>可以通过<code>ALTER TABLE table_name ADD INDEX index_name (column);</code>创建普通索引</p>
<p>可以通过<code>ALTER TABLE table_name ADD INDEX index_name(column1, column2, column3);</code>创建组合索引</p>
<h4 id="全文索引："><a href="#全文索引：" class="headerlink" title="全文索引："></a>全文索引：</h4><p>是目前搜索引擎使用的一种关键技术。<br>可以通过<code>ALTER TABLE table_name ADD FULLTEXT (column);</code>创建全文索引</p>
<h4 id="最左前缀"><a href="#最左前缀" class="headerlink" title="最左前缀"></a>最左前缀</h4><p>顾名思义，就是最左优先，在创建多列索引时，要根据业务需求，where子句中使用最频繁的一列放在最左边。<br>还有一个就是生效原则 比如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">index(a,b,c)</span><br><span class="line">where a=3	                          只使用了a</span><br><span class="line">where a=3 and b=5	                  使用了a, b</span><br><span class="line">where a=3 and b=5 and c=4	          使用了a, b, c</span><br><span class="line">where b=3 or where c=4	                  没有使用索引</span><br><span class="line">where a=3 and c=4	                  仅使用了a</span><br><span class="line">where a=3 and b&gt;10 and c=7	          使用了a, b</span><br><span class="line">where a=3 and b like &apos;%xx%&apos; and c=7	  使用了a, b</span><br></pre></td></tr></table></figure></p>
<h4 id="索引算法有-BTree-Hash"><a href="#索引算法有-BTree-Hash" class="headerlink" title="索引算法有 BTree || Hash"></a>索引算法有 BTree || Hash</h4><p>BTree是最常用的mysql数据库索引算法，也是mysql默认的算法。因为它不仅可以被用在=,&gt;,&gt;=,&lt;,&lt;=和between这些比较操作符上，而且还可以用于like操作符，只要它的查询条件是一个不以通配符开头的常量，</p>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where name like &apos;jack%&apos;;</span><br></pre></td></tr></table></figure></p>
<p>如果一通配符开头，或者没有使用常量，则不会使用索引，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where name like &apos;%jack&apos;;</span><br></pre></td></tr></table></figure></p>
<p>Hash索引只能用于对等比较，例如=,&lt;=&gt;（相当于=）操作符。由于是一次定位数据，不像BTree索引需要从根节点到枝节点，最后才能访问到页节点这样多次IO访问，所以检索效率远高于BTree索引。<br>BTree索引是最常用的mysql数据库索引算法，也是mysql默认的算法。因为它不仅可以被用在=,&gt;,&gt;=,&lt;,&lt;=和between这些比较操作符上，而且还可以用于like操作符</p>
<p>例如：<br>只要它的查询条件是一个不以通配符开头的常量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where name like &apos;jack%&apos;;</span><br></pre></td></tr></table></figure></p>
<p>如果一通配符开头，或者没有使用常量，则不会使用索引，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where name like &apos;%jack&apos;;</span><br></pre></td></tr></table></figure></p>
<p>Hash索引只能用于对等比较，例如=,&lt;=&gt;（相当于=）操作符。由于是一次定位数据，不像BTree索引需要从根节点到枝节点，最后才能访问到页节点这样多次IO访问，所以检索效率远高于BTree索引。</p>
<h3 id="如何定位及优化SQL语句的性能问题？"><a href="#如何定位及优化SQL语句的性能问题？" class="headerlink" title="如何定位及优化SQL语句的性能问题？"></a>如何定位及优化SQL语句的性能问题？</h3><p>对于低性能的SQL语句的定位，最重要也是最有效的方法就是使用执行计划。<br>我们知道，不管是哪种数据库，或者是哪种数据库引擎，在对一条SQL语句进行执行的过程中都会做很多相关的优化，对于查询语句，最重要的优化方式就是使用索引。<br>而执行计划，就是显示数据库引擎对于SQL语句的执行的详细情况，其中包含了是否使用索引，使用什么索引，使用的索引的相关信息等。<br><img src="https://user-gold-cdn.xitu.io/2018/9/19/165f09ddcf1f8469?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="MYSQL"></p>
<p>执行计划包含的信息</p>
<h4 id="id"><a href="#id" class="headerlink" title="id"></a>id</h4><p>有一组数字组成。表示一个查询中各个子查询的执行顺序;</p>
<p>id相同执行顺序由上至下。<br>id不同，id值越大优先级越高，越先被执行。<br>id为null时表示一个结果集，不需要使用它查询，常出现在包含union等查询语句中。</p>
<h4 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h4><p>每个子查询的查询类型，一些常见的查询类型。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">id</span><br><span class="line">select_type</span><br><span class="line">description</span><br><span class="line"></span><br><span class="line">1</span><br><span class="line">SIMPLE</span><br><span class="line">不包含任何子查询或union等查询</span><br><span class="line"></span><br><span class="line">2</span><br><span class="line">PRIMARY</span><br><span class="line">包含子查询最外层查询就显示为 PRIMARY</span><br><span class="line"></span><br><span class="line">3</span><br><span class="line">SUBQUERY</span><br><span class="line">在select或 where字句中包含的查询</span><br><span class="line"></span><br><span class="line">4</span><br><span class="line">DERIVED</span><br><span class="line">from字句中包含的查询</span><br><span class="line"></span><br><span class="line">5</span><br><span class="line">UNION</span><br><span class="line">出现在union后的查询语句中</span><br><span class="line"></span><br><span class="line">6</span><br><span class="line">UNION RESULT</span><br><span class="line">从UNION中获取结果集，例如上文的第三个例子</span><br></pre></td></tr></table></figure></p>
<h4 id="table"><a href="#table" class="headerlink" title="table"></a>table</h4><p>查询的数据表，当从衍生表中查数据时会显示 x 表示对应的执行计划id</p>
<h4 id="partitions"><a href="#partitions" class="headerlink" title="partitions"></a>partitions</h4><p>表分区、表创建的时候可以指定通过那个列进行表分区。 举个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table tmp (</span><br><span class="line">    id int unsigned not null AUTO_INCREMENT,</span><br><span class="line">    name varchar(255),</span><br><span class="line">    PRIMARY KEY (id)</span><br><span class="line">) engine = innodb</span><br><span class="line">partition by key (id) partitions 5;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://user-gold-cdn.xitu.io/2018/9/19/165f09ddced993f6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="MYSQL"></p>
<h4 id="type-非常重要，可以看到有没有走索引"><a href="#type-非常重要，可以看到有没有走索引" class="headerlink" title="type(非常重要，可以看到有没有走索引)"></a>type(非常重要，可以看到有没有走索引)</h4><p>访问类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ALL   扫描全表数据</span><br><span class="line">index 遍历索引</span><br><span class="line">range 索引范围查找</span><br><span class="line">index_subquery 在子查询中使用 ref</span><br><span class="line">unique_subquery 在子查询中使用 eq_ref</span><br><span class="line">ref_or_null 对Null进行索引的优化的 ref</span><br><span class="line">fulltext 使用全文索引</span><br><span class="line">ref   使用非唯一索引查找数据</span><br><span class="line">eq_ref 在join查询中使用PRIMARY KEYorUNIQUE NOT NULL索引关联。</span><br></pre></td></tr></table></figure></p>
<h4 id="possible-keys"><a href="#possible-keys" class="headerlink" title="possible_keys"></a>possible_keys</h4><p>可能使用的索引，注意不一定会使用。查询涉及到的字段上若存在索引，则该索引将被列出来。当该列为 NULL时就要考虑当前的SQL是否需要优化了。</p>
<h4 id="key"><a href="#key" class="headerlink" title="key"></a>key</h4><p>显示MySQL在查询中实际使用的索引，若没有使用索引，显示为NULL。<br>TIPS:查询中若使用了覆盖索引(覆盖索引：索引的数据覆盖了需要查询的所有数据)，则该索引仅出现在key列表中</p>
<h4 id="key-length"><a href="#key-length" class="headerlink" title="key_length"></a>key_length</h4><p>索引长度</p>
<h4 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h4><p>表示上述表的连接匹配条件，即哪些列或常量被用于查找索引列上的值</p>
<h4 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h4><p>返回估算的结果集数目，并不是一个准确的值。</p>
<h4 id="extra"><a href="#extra" class="headerlink" title="extra"></a>extra</h4><p>的信息非常丰富，常见的有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using index 使用覆盖索引</span><br><span class="line">Using where 使用了用where子句来过滤结果集</span><br><span class="line">Using filesort 使用文件排序，使用非索引列进行排序时出现，非常消耗性能，尽量优化。</span><br><span class="line">Using temporary 使用了临时表</span><br></pre></td></tr></table></figure></p>
<p>sql优化的目标可以参考阿里开发手册<br><img src="https://user-gold-cdn.xitu.io/2018/9/19/165f09de2d1d5b0e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="MYSQL"></p>
<h3 id="某个表有近千万数据，CRUD比较慢，如何优化？分库分表了是怎么做的？分表分库了有什么问题？有用到中间件么-他们的原理知道么？"><a href="#某个表有近千万数据，CRUD比较慢，如何优化？分库分表了是怎么做的？分表分库了有什么问题？有用到中间件么-他们的原理知道么？" class="headerlink" title="某个表有近千万数据，CRUD比较慢，如何优化？分库分表了是怎么做的？分表分库了有什么问题？有用到中间件么?他们的原理知道么？"></a>某个表有近千万数据，CRUD比较慢，如何优化？分库分表了是怎么做的？分表分库了有什么问题？有用到中间件么?他们的原理知道么？</h3><p>数据千万级别之多，占用的存储空间也比较大，可想而知它不会存储在一块连续的物理空间上，而是链式存储在多个碎片的物理空间上。可能对于长字符串的比较，就用更多的时间查找与比较，这就导致用更多的时间。</p>
<p>可以做表拆分，减少单表字段数量，优化表结构。<br>在保证主键有效的情况下，检查主键索引的字段顺序，使得查询语句中条件的字段顺序和主键索引的字段顺序保持一致。</p>
<p>主要两种拆分 垂直拆分，水平拆分。</p>
<h4 id="垂直分表"><a href="#垂直分表" class="headerlink" title="垂直分表"></a>垂直分表</h4><p>也就是“大表拆小表”，基于列字段进行的。一般是表中的字段较多，将不常用的， 数据较大，长度较长（比如text类型字段）的拆分到“扩展表“。 一般是针对那种几百列的大表，也避免查询时，数据量太大造成的“跨页”问题。</p>
<p>垂直分库针对的是一个系统中的不同业务进行拆分，比如用户User一个库，商品Producet一个库，订单Order一个库。 切分后，要放在多个服务器上，而不是一个服务器上。为什么？ 我们想象一下，一个购物网站对外提供服务，会有用户，商品，订单等的CRUD。没拆分之前， 全部都是落到单一的库上的，这会让数据库的单库处理能力成为瓶颈。按垂直分库后，如果还是放在一个数据库服务器上， 随着用户量增大，这会让单个数据库的处理能力成为瓶颈，还有单个服务器的磁盘空间，内存，tps等非常吃紧。 所以我们要拆分到多个服务器上，这样上面的问题都解决了，以后也不会面对单机资源问题。</p>
<p>数据库业务层面的拆分，和服务的“治理”，“降级”机制类似，也能对不同业务的数据分别的进行管理，维护，监控，扩展等。 数据库往往最容易成为应用系统的瓶颈，而数据库本身属于“有状态”的，相对于Web和应用服务器来讲，是比较难实现“横向扩展”的。 数据库的连接资源比较宝贵且单机处理能力也有限，在高并发场景下，垂直分库一定程度上能够突破IO、连接数及单机硬件资源的瓶颈。</p>
<h4 id="水平分表"><a href="#水平分表" class="headerlink" title="水平分表"></a>水平分表</h4><p>针对数据量巨大的单张表（比如订单表），按照某种规则（RANGE,HASH取模等），切分到多张表里面去。 但是这些表还是在同一个库中，所以库级别的数据库操作还是有IO瓶颈。不建议采用。</p>
<h5 id="水平分库分表"><a href="#水平分库分表" class="headerlink" title="水平分库分表"></a>水平分库分表</h5><p>将单张表的数据切分到多个服务器上去，每个服务器具有相应的库与表，只是表中数据集合不同。 水平分库分表能够有效的缓解单机和单库的性能瓶颈和压力，突破IO、连接数、硬件资源等的瓶颈。</p>
<h5 id="水平分库分表切分规则"><a href="#水平分库分表切分规则" class="headerlink" title="水平分库分表切分规则"></a>水平分库分表切分规则</h5><p>RANGE: 从0到10000一个表，10001到20000一个表；</p>
<p>HASH取模: 一个商场系统，一般都是将用户，订单作为主表，然后将和它们相关的作为附表，这样不会造成跨库事务之类的问题。 取用户id，然后hash取模，分配到不同的数据库上。</p>
<p>地理区域: 比如按照华东，华南，华北这样来区分业务，七牛云应该就是如此。</p>
<p>时间: 按照时间切分，就是将6个月前，甚至一年前的数据切出去放到另外的一张表，因为随着时间流逝，这些表的数据 被查询的概率变小，所以没必要和“热数据”放在一起，这个也是“冷热数据分离”。</p>
<h4 id="分库分表后面临的问题"><a href="#分库分表后面临的问题" class="headerlink" title="分库分表后面临的问题"></a>分库分表后面临的问题</h4><ol>
<li><p>事务支持<br>分库分表后，就成了分布式事务了。如果依赖数据库本身的分布式事务管理功能去执行事务，将付出高昂的性能代价； 如果由应用程序去协助控制，形成程序逻辑上的事务，又会造成编程方面的负担。</p>
</li>
<li><p>跨库join<br>只要是进行切分，跨节点Join的问题是不可避免的。但是良好的设计和切分却可以减少此类情况的发生。解决这一问题的普遍做法是分两次查询实现。在第一次查询的结果集中找出关联数据的id,根据这些id发起第二次请求得到关联数据。</p>
</li>
<li><p>分库分表方案产品<br>跨节点的count,order by,group by以及聚合函数问题</p>
</li>
</ol>
<p>这些是一类问题，因为它们都需要基于全部数据集合进行计算。多数的代理都不会自动处理合并工作。解决方案：与解决跨节点join问题的类似，分别在各个节点上得到结果后在应用程序端进行合并。和join不同的是每个结点的查询可以并行执行，因此很多时候它的速度要比单一大表快很多。但如果结果集很大，对应用程序内存的消耗是一个问题。</p>
<ol start="4">
<li><p>数据迁移，容量规划，扩容等问题<br>来自淘宝综合业务平台团队，它利用对2的倍数取余具有向前兼容的特性（如对4取余得1的数对2取余也是1）来分配数据，避免了行级别的数据迁移，但是依然需要进行表级别的迁移，同时对扩容规模和分表数量都有限制。总得来说，这些方案都不是十分的理想，多多少少都存在一些缺点，这也从一个侧面反映出了Sharding扩容的难度。</p>
</li>
<li><p>ID问题<br>一旦数据库被切分到多个物理结点上，我们将不能再依赖数据库自身的主键生成机制。一方面，某个分区数据库自生成的ID无法保证在全局上是唯一的；另一方面，应用程序在插入数据之前需要先获得ID,以便进行SQL路由.</p>
</li>
</ol>
<p>一些常见的主键生成策略:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UUID</span><br><span class="line">使用UUID作主键是最简单的方案，但是缺点也是非常明显的。由于UUID非常的长，除占用大量存储空间外，最主要的问题是在索引上，在建立索引和基于索引进行查询时都存在性能问题。</span><br><span class="line">Twitter的分布式自增ID算法Snowflake</span><br><span class="line">在分布式系统中，需要生成全局UID的场合还是比较多的，twitter的snowflake解决了这种需求，实现也还是很简单的，除去配置信息，核心代码就是毫秒级时间41位 机器ID 10位 毫秒内序列12位。</span><br><span class="line"></span><br><span class="line">跨分片的排序分页</span><br><span class="line">般来讲，分页时需要按照指定字段进行排序。当排序字段就是分片字段的时候，我们通过分片规则可以比较容易定位到指定的分片，而当排序字段非分片字段的时候，情况就会变得比较复杂了。为了最终结果的准确性，我们需要在不同的分片节点中将数据进行排序并返回，并将不同分片返回的结果集进行汇总和再次排序，最后再返回给用户。如下图所示：</span><br></pre></td></tr></table></figure></p>
<p><img src="https://user-gold-cdn.xitu.io/2018/9/19/165f09de6982ddaf?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="MYSQL"></p>
<h4 id="中间件推荐"><a href="#中间件推荐" class="headerlink" title="中间件推荐"></a>中间件推荐</h4><p><img src="https://user-gold-cdn.xitu.io/2018/9/19/165f09de6996a964?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="MYSQL"></p>
<h3 id="mysql中in-和exists-区别"><a href="#mysql中in-和exists-区别" class="headerlink" title="mysql中in 和exists 区别"></a>mysql中in 和exists 区别</h3><p>mysql中的in语句是把外表和内表作hash 连接，而exists语句是对外表作loop循环，每次loop循环再对内表进行查询。一直大家都认为exists比in语句的效率要高，这种说法其实是不准确的。这个是要区分环境的。</p>
<p>如果查询的两个表大小相当，那么用in和exists差别不大。<br>如果两个表中一个较小，一个是大表，则子查询表大的用exists，子查询表小的用in。<br>not in 和not exists如果查询语句使用了not in 那么内外表都进行全表扫描，没有用到索引；而not extsts的子查询依然能用到表上的索引。所以无论那个表大，用not exists都比not in要快。</p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/MySQL/" rel="tag"># MySQL</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/19/转载-TCP传输趣解/" rel="next" title="转载-TCP传输趣解">
                <i class="fa fa-chevron-left"></i> 转载-TCP传输趣解
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/09/21/互联网公司面试必问的Redis题目/" rel="prev" title="互联网公司面试必问的Redis题目">
                互联网公司面试必问的Redis题目 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">博主</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">230</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">37</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">45</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是脏读？幻读？不可重复读？什么是事务的隔离级别？Mysql的默认隔离级别是？"><span class="nav-number">1.</span> <span class="nav-text">什么是脏读？幻读？不可重复读？什么是事务的隔离级别？Mysql的默认隔离级别是？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Read-uncommitted"><span class="nav-number">1.1.</span> <span class="nav-text">Read uncommitted</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Read-committed"><span class="nav-number">1.2.</span> <span class="nav-text">Read committed</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Repeatable-read"><span class="nav-number">1.3.</span> <span class="nav-text">Repeatable read</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#什么时候会出现幻读？"><span class="nav-number">1.4.</span> <span class="nav-text">什么时候会出现幻读？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Serializable-序列化"><span class="nav-number">1.5.</span> <span class="nav-text">Serializable 序列化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事物隔离是怎么实现的？"><span class="nav-number">2.</span> <span class="nav-text">事物隔离是怎么实现的？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有哪些锁？分别介绍下"><span class="nav-number">3.</span> <span class="nav-text">有哪些锁？分别介绍下</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#行级锁"><span class="nav-number">3.1.</span> <span class="nav-text">行级锁</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#表级锁"><span class="nav-number">3.2.</span> <span class="nav-text">表级锁</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#页级锁"><span class="nav-number">3.3.</span> <span class="nav-text">页级锁</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是死锁？怎么解决？"><span class="nav-number">4.</span> <span class="nav-text">什么是死锁？怎么解决？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#常见的解决死锁的方法"><span class="nav-number">4.1.</span> <span class="nav-text">常见的解决死锁的方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL的生命周期？关键字的先后顺序？"><span class="nav-number">5.</span> <span class="nav-text">SQL的生命周期？关键字的先后顺序？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#生命周期"><span class="nav-number">5.1.</span> <span class="nav-text">生命周期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关键字先后顺序"><span class="nav-number">5.2.</span> <span class="nav-text">关键字先后顺序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是乐观锁？悲观锁？实现方式？"><span class="nav-number">6.</span> <span class="nav-text">什么是乐观锁？悲观锁？实现方式？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#悲观锁"><span class="nav-number">6.1.</span> <span class="nav-text">悲观锁</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#乐观锁"><span class="nav-number">6.2.</span> <span class="nav-text">乐观锁</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是数据库连接池？"><span class="nav-number">7.</span> <span class="nav-text">什么是数据库连接池？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引设计的原则？"><span class="nav-number">8.</span> <span class="nav-text">索引设计的原则？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是数据库索引？索引有哪几种类型？什么是最左前缀原则？索引算法有哪些？有什么区别？"><span class="nav-number">9.</span> <span class="nav-text">什么是数据库索引？索引有哪几种类型？什么是最左前缀原则？索引算法有哪些？有什么区别？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#主键索引"><span class="nav-number">9.1.</span> <span class="nav-text">主键索引:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#唯一索引"><span class="nav-number">9.2.</span> <span class="nav-text">唯一索引:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#普通索引"><span class="nav-number">9.3.</span> <span class="nav-text">普通索引:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#全文索引："><span class="nav-number">9.4.</span> <span class="nav-text">全文索引：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#最左前缀"><span class="nav-number">9.5.</span> <span class="nav-text">最左前缀</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#索引算法有-BTree-Hash"><span class="nav-number">9.6.</span> <span class="nav-text">索引算法有 BTree || Hash</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何定位及优化SQL语句的性能问题？"><span class="nav-number">10.</span> <span class="nav-text">如何定位及优化SQL语句的性能问题？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#id"><span class="nav-number">10.1.</span> <span class="nav-text">id</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#select-type"><span class="nav-number">10.2.</span> <span class="nav-text">select_type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table"><span class="nav-number">10.3.</span> <span class="nav-text">table</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#partitions"><span class="nav-number">10.4.</span> <span class="nav-text">partitions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#type-非常重要，可以看到有没有走索引"><span class="nav-number">10.5.</span> <span class="nav-text">type(非常重要，可以看到有没有走索引)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#possible-keys"><span class="nav-number">10.6.</span> <span class="nav-text">possible_keys</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#key"><span class="nav-number">10.7.</span> <span class="nav-text">key</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#key-length"><span class="nav-number">10.8.</span> <span class="nav-text">key_length</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ref"><span class="nav-number">10.9.</span> <span class="nav-text">ref</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rows"><span class="nav-number">10.10.</span> <span class="nav-text">rows</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#extra"><span class="nav-number">10.11.</span> <span class="nav-text">extra</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#某个表有近千万数据，CRUD比较慢，如何优化？分库分表了是怎么做的？分表分库了有什么问题？有用到中间件么-他们的原理知道么？"><span class="nav-number">11.</span> <span class="nav-text">某个表有近千万数据，CRUD比较慢，如何优化？分库分表了是怎么做的？分表分库了有什么问题？有用到中间件么?他们的原理知道么？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#垂直分表"><span class="nav-number">11.1.</span> <span class="nav-text">垂直分表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#水平分表"><span class="nav-number">11.2.</span> <span class="nav-text">水平分表</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#水平分库分表"><span class="nav-number">11.2.1.</span> <span class="nav-text">水平分库分表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#水平分库分表切分规则"><span class="nav-number">11.2.2.</span> <span class="nav-text">水平分库分表切分规则</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分库分表后面临的问题"><span class="nav-number">11.3.</span> <span class="nav-text">分库分表后面临的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#中间件推荐"><span class="nav-number">11.4.</span> <span class="nav-text">中间件推荐</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mysql中in-和exists-区别"><span class="nav-number">12.</span> <span class="nav-text">mysql中in 和exists 区别</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"><a href="http://blog.timilong.com/about" target="_blank"> Timi.long </a></span>
  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.4.1</div>




<!-- 新增访客统计代码 -->

<div class="busuanzi-count">
    <script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      访问用户： <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人
    </span>
    <div class="powered-by"></div>
    <span class="site-uv">
      <i class="fa fa-eye"></i>
      访问次数： <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次
    </span>
    <!-- 博客字数统计
    <span class="site-pv">
      <i class="fa fa-pencil"></i>
      博客全站共： <span class="post-count"> </span> 字
    </span> -->
</div>
<!-- 新增访客统计代码 END-->

        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>
  


  





  <script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
